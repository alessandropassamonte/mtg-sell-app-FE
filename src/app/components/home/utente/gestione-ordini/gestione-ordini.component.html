<div class="container">
    <div class="row mb-2">
        <div class="col">
            <a class="btn btn-primary" [routerLink]="['/home/utente']">
                < Torna alla sezione Utente</a>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h6>Trova una carta</h6>
        </div>
        <div class="card-body">
            <input [(ngModel)]="searchValue" class="form-control" (input)="loadCards()">
            <div *ngIf="cards.length > 0" class="mt-3">
                <ul class="list-group scrollable-list">
                    <li class="list-group-item" *ngFor="let item of cards">
                        <ng-template #popTemplate>
                            <div [innerHtml]="returnHtml(item.png)"></div>
                        </ng-template>
                        <span [tooltip]="popTemplate">
                                <p>{{item.printedName ? (item.printedName + ' (' + item.name + ')') : item.name}}</p>
                                <p *ngFor="let setItem of item.editions" class="text-muted mb-1">
                                    <img [src]="setItem.setIcon" alt="Edition" style="width: 20px; height: 20px;">
                                    <span class="ms-2">{{ setItem.setName }}</span>
                                </p>
                        </span>
                        <button class="btn btn-primary" (click)="addItem(item)">Aggiungi all'ordine</button>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <div class="card mb-4">
        <div class="card-header">
            <h6>Lista Carte Ordine</h6>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Nome Carta</th>
                    <th>Nome Set</th>
                    <th>Prezzo Minimo Card Market</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody *ngIf="cards.length > 0">
                  <tr *ngFor="let item of selectedItems ; let i = index">
                    <td>{{item.printedName ? (item.printedName + ' (' + item.name + ')') : item.name}} </td>
                    <td><small *ngFor="let setItem of item.editions">
                        <div class="d-flex align-items-center">
                          <img [src]="setItem.setIcon" alt="Edition"
                               style="width: 40px; height: 40px;">
                          <span class="ms-2" >{{ setItem.setName }}</span>
                      </div>
                      </small></td>
                    <td>{{ item.priceCM }}</td>
                    <td><button class="btn btn-danger" (click)="removeItem(i)">Rimuovi</button></td>
                  </tr>
                </tbody>
                <tbody *ngIf="cards.length == 0">
                  <tr >
                    <td>Nessuna carta presente</td>
                  </tr>
                </tbody>
              </table>
        </div>
    </div>
</div>